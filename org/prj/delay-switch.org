#+STARTUP: showall indent hidestars
#+TOC: headlines 3

#+TITLE: Выключатель с задержкой выключения

* Интро

Это учебно-тестовый проект, в котором на примере простой схемы можно пройти все этапы
проектирования электронного устройства на микроконтроллере.

* Задача

Требуется собрать устройство, управляемое кнопкой по следующему алгоритму:
- В состоянии "выключено" нажатие кнопки приводит к включению нагрузки и переходу в
  состояние "включено"
- В состоянии "включено" нажатие кнопки приводит к выключению нагрузки и переходу в
  состояние "выключено"
- В состоянии "включено" через заданное в программе время устройство самостоятельно
  выключает нагрузку и переходит в состояние "выключено"

Применение: устройство может служить выключателем света в туалете/ванной комнате,
предотвращая ситуацию "забыли выключить"

* Прототипирование

Для прототипирования воспользуемся =Arduino Uno= и модулем расширения =Relay Shield=.

В ОС Ubuntu 16.04 установим =Arduino IDE 1.8.9= с сайта https://www.arduino.cc запустив
в терминале =./install.sh=

Чтобы проверить работоспособность платы и модуля расширения загрузим следующий скетч:

#+BEGIN_SRC c
  int Relay_1 = 4;
  int Relay_2 = 5;
  int Relay_3 = 6;
  int Relay_4 = 7;

  void setup()  {
      // declare pins to be an output:
      pinMode(Relay_1, OUTPUT);
      pinMode(Relay_2, OUTPUT);
      pinMode(Relay_3, OUTPUT);
      pinMode(Relay_4, OUTPUT);
  }

  // the loop routine runs over and over again forever:
  void loop()  {
      digitalWrite(Relay_1,HIGH);
      delay(500);
      digitalWrite(Relay_1,LOW);
      delay(500);

      digitalWrite(Relay_2,HIGH);
      delay(500);
      digitalWrite(Relay_2,LOW);
      delay(500);

      digitalWrite(Relay_3,HIGH);
      delay(500);
      digitalWrite(Relay_3,LOW);
      delay(500);

      digitalWrite(Relay_4,HIGH);
      delay(500);
      digitalWrite(Relay_4,LOW);
      delay(500);
  }
#+END_SRC
